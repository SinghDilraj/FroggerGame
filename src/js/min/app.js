"use strict";swal.mixin({confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["😎","😎","😎","😎","😎","😎","😎","😎"]}).queue([{title:"LEGEND",text:"Playing this game is easy"},"USE THE ARROW KEYS TO MOVE AROUND THE BLOCKS👈👇👉☝","REACH THE OTHER SIDE TO WIN🚩","YOU NEED THE KEY TO OPEN THE DOORS 🔑","GEMS ARE FOR SCORE 🏆","HEARTS ARE FOR LIVES (3 max) 💕","DO NOT COLLIDE WITH THE BUGS 😈","CLICK THE CHARACTER TO CHOOSE 🙂"]);var charList=document.querySelector(".char-list");charList.addEventListener("click",function(e){console.log(e.target.src.split("/").splice(11,13).join("/")),player.sprite=e.target.src.split("/").splice(11,13).join("/")});var audio=document.createElement("audio");document.body.appendChild(audio);var audioSrc=document.createElement("source");audio.appendChild(audioSrc),audioSrc.src="music/game-background-music.mp3",document.addEventListener("keydown",function(){return audio.play()}),document.addEventListener("mouseover",function(){return audio.play()});var highestLevel,highestGems,random=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},collision=function(){var e=!0,t=!1,r=void 0;try{for(var a,l=allEnemies[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var i=a.value;if(player.x+10<i.x+101-10&&player.x+101-10>i.x+10&&player.y+171-20>i.y+75&&player.y+75<i.y+171-20)return!0}}catch(e){t=!0,r=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw r}}},allLevelsReached=[],allGemsCollected=[],Enemy=function(){this.sprite="images/enemy-bug.png",this.x=-97,this.y=[62,146,230][random(0,3)],this.level=1,this.vx=0};Enemy.prototype.update=function(e){if(collision()&&(player.x=203,player.y=405,gem.sprite=allGems[random(0,3)],gem.x=[23,123,223,323,423][random(0,5)],gem.y=[107,191,275][random(0,3)],key.x=[23,123,223,323,423][random(0,5)],key.y=[107,191,275][random(0,3)],isKeyTrue=!1,life.x=[33,133,233,333,433][random(0,5)],life.y=[122,206,290][random(0,3)],lives.pop(),lives.length<=0)){lives=["images/Heart.png"],allGemsCollected.push(player.gems),highestLevel=localStorage.getItem("highestLevel")||0,highestGems=localStorage.getItem("highestGems")||0,Math.max.apply(Math,allGemsCollected)>highestGems&&localStorage.setItem("highestGems",Math.max.apply(Math,allGemsCollected)),allLevelsReached.push(this.level),Math.max.apply(Math,allLevelsReached)>highestLevel&&localStorage.setItem("highestLevel",Math.max.apply(Math,allLevelsReached));var t=!0,r=!1,a=void 0;try{for(var l,i=allEnemies[Symbol.iterator]();!(t=(l=i.next()).done);t=!0){l.value.level=1}}catch(e){r=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}player.gems=0,swal.mixin({confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["😢","💪","🏆"]}).queue([{title:"YOU DIED",text:"Are you the high scorer?"},"Highest Level Reached "+highestLevel,"Highest Gems Collected "+highestGems])}this.vx=random(1,this.level+2),this.x=this.x+this.vx,493<this.x&&(this.x=-97,this.y=[62,146,230][random(0,3)])},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y),ctx.font="40px Arial",ctx.strokeStyle="blue",ctx.strokeText("LEVEL "+this.level,2,35)};var Player=function(){this.sprite="images/char-boy.png",this.x=203,this.y=405,this.gems=0};Player.prototype.update=function(){if(player.y<0&&!0===isKeyTrue){var e=!0,t=!(player.y=405),r=void 0;try{for(var a,l=allEnemies[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var i=a.value;i.level=i.level+1}}catch(e){t=!0,r=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw r}}gem.sprite=allGems[random(0,3)],gem.x=[23,123,223,323,423][random(0,5)],gem.y=[107,191,275][random(0,3)],key.x=[23,123,223,323,423][random(0,5)],key.y=[107,191,275][random(0,3)],isKeyTrue=!1,life.x=[33,133,233,333,433][random(0,5)],life.y=[122,206,290][random(0,3)]}},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.handleInput=function(e){"up"===e&&0<player.y?player.y=player.y-84:"down"===e&&player.y<405?player.y=player.y+84:"left"===e&&3<player.x?player.x=player.x-100:"right"===e&&player.x<403&&(player.x=player.x+100)};var allGems=["images/Gem Blue.png","images/Gem Orange.png","images/Gem Green.png"],Gems=function(){this.sprite=allGems[random(0,3)],this.x=[23,123,223,323,423][random(0,5)],this.y=[107,191,275][random(0,3)]};Gems.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y,50,100),player.x+10<gem.x+50-2&&player.x+101-10>gem.x+2&&player.y+171-20>gem.y+75&&player.y+75<gem.y+100-10&&(gem.x=2323,player.gems=player.gems+1),ctx.font="40px Arial",ctx.strokeStyle="ORANGE",ctx.strokeText("GEMS "+player.gems,311,35)};var Key=function(){this.sprite="images/Key.png",this.x=[23,123,223,323,423][random(0,5)],this.y=[107,191,275][random(0,3)]};Key.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y,70,120),player.x+10<key.x+50-2&&player.x+101-10>key.x+2&&player.y+171-20>key.y+75&&player.y+75<key.y+100-10&&(key.x=2323,isKeyTrue=!0)};var Life=function(){this.sprite="images/Heart.png",this.x=[33,133,233,333,433][random(0,5)],this.y=[122,206,290][random(0,3)]};Life.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y,40,90),player.x+10<life.x+50-2&&player.x+101-10>life.x+2&&player.y+171-20>life.y+75&&player.y+75<life.y+100-10&&(life.x=2323,lives.length<=2&&lives.push("images/Heart.png")),1===lives.length?ctx.drawImage(Resources.get(lives[0]),231,17,15,35):2===lives.length?(ctx.drawImage(Resources.get(lives[0]),231,17,15,35),ctx.drawImage(Resources.get(lives[1]),246,17,15,35)):3<=lives.length&&(ctx.drawImage(Resources.get(lives[0]),231,17,15,35),ctx.drawImage(Resources.get(lives[1]),246,17,15,35),ctx.drawImage(Resources.get(lives[2]),260,17,15,35))};var allEnemies=[new Enemy,new Enemy,new Enemy,new Enemy],player=new Player,gem=new Gems,key=new Key,life=new Life,lives=["images/Heart.png"];document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});